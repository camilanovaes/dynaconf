
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>dynaconf.base &#8212; dynaconf 3.0.0rc2 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for dynaconf.base</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">importlib</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">contextmanager</span>
<span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">suppress</span>

<span class="kn">from</span> <span class="nn">dynaconf</span> <span class="kn">import</span> <span class="n">default_settings</span>
<span class="kn">from</span> <span class="nn">dynaconf.loaders</span> <span class="kn">import</span> <span class="n">default_loader</span>
<span class="kn">from</span> <span class="nn">dynaconf.loaders</span> <span class="kn">import</span> <span class="n">enable_external_loaders</span>
<span class="kn">from</span> <span class="nn">dynaconf.loaders</span> <span class="kn">import</span> <span class="n">env_loader</span>
<span class="kn">from</span> <span class="nn">dynaconf.loaders</span> <span class="kn">import</span> <span class="n">py_loader</span>
<span class="kn">from</span> <span class="nn">dynaconf.loaders</span> <span class="kn">import</span> <span class="n">settings_loader</span>
<span class="kn">from</span> <span class="nn">dynaconf.loaders</span> <span class="kn">import</span> <span class="n">yaml_loader</span>
<span class="kn">from</span> <span class="nn">dynaconf.utils</span> <span class="kn">import</span> <span class="n">BANNER</span>
<span class="kn">from</span> <span class="nn">dynaconf.utils</span> <span class="kn">import</span> <span class="n">compat_kwargs</span>
<span class="kn">from</span> <span class="nn">dynaconf.utils</span> <span class="kn">import</span> <span class="n">deduplicate</span>
<span class="kn">from</span> <span class="nn">dynaconf.utils</span> <span class="kn">import</span> <span class="n">ensure_a_list</span>
<span class="kn">from</span> <span class="nn">dynaconf.utils</span> <span class="kn">import</span> <span class="n">missing</span>
<span class="kn">from</span> <span class="nn">dynaconf.utils</span> <span class="kn">import</span> <span class="n">object_merge</span>
<span class="kn">from</span> <span class="nn">dynaconf.utils</span> <span class="kn">import</span> <span class="n">RENAMED_VARS</span>
<span class="kn">from</span> <span class="nn">dynaconf.utils</span> <span class="kn">import</span> <span class="n">upperfy</span>
<span class="kn">from</span> <span class="nn">dynaconf.utils.boxing</span> <span class="kn">import</span> <span class="n">DynaBox</span>
<span class="kn">from</span> <span class="nn">dynaconf.utils.files</span> <span class="kn">import</span> <span class="n">find_file</span>
<span class="kn">from</span> <span class="nn">dynaconf.utils.functional</span> <span class="kn">import</span> <span class="n">empty</span>
<span class="kn">from</span> <span class="nn">dynaconf.utils.functional</span> <span class="kn">import</span> <span class="n">LazyObject</span>
<span class="kn">from</span> <span class="nn">dynaconf.utils.parse_conf</span> <span class="kn">import</span> <span class="n">converters</span>
<span class="kn">from</span> <span class="nn">dynaconf.utils.parse_conf</span> <span class="kn">import</span> <span class="n">evaluate_lazy_format</span>
<span class="kn">from</span> <span class="nn">dynaconf.utils.parse_conf</span> <span class="kn">import</span> <span class="n">parse_conf_data</span>
<span class="kn">from</span> <span class="nn">dynaconf.utils.parse_conf</span> <span class="kn">import</span> <span class="n">true_values</span>
<span class="kn">from</span> <span class="nn">dynaconf.validator</span> <span class="kn">import</span> <span class="n">ValidatorList</span>


<div class="viewcode-block" id="LazySettings"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.LazySettings">[docs]</a><span class="k">class</span> <span class="nc">LazySettings</span><span class="p">(</span><span class="n">LazyObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;When you do::</span>

<span class="sd">        &gt;&gt;&gt; from dynaconf import Dynaconf</span>
<span class="sd">        &gt;&gt;&gt; settings = Dynaconf(*options)</span>

<span class="sd">    a LazySettings is initialized with only default_settings and all the</span>
<span class="sd">    parameters passed to *options.</span>

<span class="sd">    Then when you first access a value, this will be set up and loaders will</span>
<span class="sd">    be executed looking for defined config files or the file defined in</span>
<span class="sd">    SETTINGS_FILE_FOR_DYNACONF environment variable::</span>

<span class="sd">        $ export SETTINGS_FILE_FOR_DYNACONF=path</span>

<span class="sd">        &gt;&gt;&gt; settings.FOO</span>

<span class="sd">    Or when you call::</span>

<span class="sd">        &gt;&gt;&gt; settings.configure(settings_module=&#39;/tmp/settings.py&#39;)</span>

<span class="sd">    You can define in your settings module a list of loaders to get values</span>
<span class="sd">    from different stores. By default it will try environment variables</span>
<span class="sd">    starting with ENVVAR_PREFIX_FOR_DYNACONF (by defaulf `DYNACONF_`)</span>

<span class="sd">    You can also customize specific parameters.</span>

<span class="sd">    Exmaple: `proj/config.py`::</span>

<span class="sd">        &gt;&gt;&gt; from dynaconf import Dynaconf</span>
<span class="sd">        &gt;&gt;&gt; settings = Dynaconf(</span>
<span class="sd">        ...    env=&#39;production&#39;,</span>
<span class="sd">        ...    loaders=[</span>
<span class="sd">        ...        &#39;dynaconf.loaders.env_loader&#39;,</span>
<span class="sd">        ...        &#39;dynaconf.loaders.redis_loader&#39;</span>
<span class="sd">        ...    ]</span>
<span class="sd">        ... )</span>

<span class="sd">    save common values in a settings file::</span>

<span class="sd">        $ echo &quot;SERVER_IP = &#39;10.10.10.10&#39;&quot; &gt; proj/settings.py</span>

<span class="sd">    or use `.toml|.yaml|.ini|.json`</span>

<span class="sd">    save sensitive values in .secrets.{py|toml|yaml|ini|json}</span>
<span class="sd">    or export as DYNACONF global environment variable::</span>

<span class="sd">        $ export DYNACONF_SERVER_PASSWD=&#39;super_secret&#39;</span>

<span class="sd">        &gt;&gt;&gt; # from proj.config import settings</span>
<span class="sd">        &gt;&gt;&gt; print settings.SERVER_IP</span>
<span class="sd">        &gt;&gt;&gt; print settings.SERVER_PASSWD</span>

<span class="sd">    and now it reads all variables starting with `DYNACONF_` from envvars</span>
<span class="sd">    and all values in a hash called DYNACONF_PROJ in redis</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        handle initialization for the customization cases</span>

<span class="sd">        :param kwargs: values that overrides default_settings</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_warn_dynaconf_global_settings</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span>
            <span class="s2">&quot;warn_dynaconf_global_settings&quot;</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span>  <span class="c1"># in 3.0.0 global settings is deprecated</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__resolve_config_aliases</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">compat_kwargs</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">LazySettings</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__resolve_config_aliases</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;takes aliases for _FOR_DYNACONF configurations</span>

<span class="sd">        e.g: ROOT_PATH=&#39;/&#39; is transformed into `ROOT_PATH_FOR_DYNACONF`</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">mispells</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;settings_files&quot;</span><span class="p">:</span> <span class="s2">&quot;settings_file&quot;</span><span class="p">,</span>
            <span class="s2">&quot;SETTINGS_FILES&quot;</span><span class="p">:</span> <span class="s2">&quot;SETTINGS_FILE&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">mispell</span><span class="p">,</span> <span class="n">correct</span> <span class="ow">in</span> <span class="n">mispells</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">mispell</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="n">correct</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">mispell</span><span class="p">)</span>

        <span class="n">for_dynaconf_keys</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">key</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">default_settings</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;_FOR_DYNACONF&quot;</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="n">aliases</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span>
            <span class="k">if</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">_FOR_DYNACONF&quot;</span> <span class="ow">in</span> <span class="n">for_dynaconf_keys</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">aliases</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="n">empty</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="n">empty</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">alias</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">alias</span><span class="si">}</span><span class="s2">_FOR_DYNACONF&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@evaluate_lazy_format</span>
    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Allow getting keys from self.store using dot notation&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrapped</span> <span class="ow">is</span> <span class="n">empty</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setup</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrapped</span><span class="o">.</span><span class="n">_deleted</span><span class="p">:</span>  <span class="c1"># noqa</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Attribute </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> was deleted, &quot;</span> <span class="s2">&quot;or belongs to different env&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">RESERVED_ATTRS</span><span class="p">:</span>
            <span class="n">lowercase_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="s2">&quot;LOWERCASE_READ_FOR_DYNACONF&quot;</span><span class="p">,</span>
                <span class="n">default_settings</span><span class="o">.</span><span class="n">LOWERCASE_READ_FOR_DYNACONF</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">lowercase_mode</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">name</span><span class="o">.</span><span class="n">isupper</span><span class="p">()</span>
            <span class="ow">and</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_wrapped</span><span class="o">.</span><span class="n">_fresh</span>
                <span class="ow">or</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrapped</span><span class="o">.</span><span class="n">FRESH_VARS_FOR_DYNACONF</span>
            <span class="p">)</span>
            <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">default_settings</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrapped</span><span class="o">.</span><span class="n">get_fresh</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wrapped</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Allow direct call of settings(&#39;val&#39;)</span>
<span class="sd">        in place of settings.get(&#39;val&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initial setup, run once.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_warn_dynaconf_global_settings</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;Usage of `from dynaconf import settings` is now &quot;</span>
                <span class="s2">&quot;DEPRECATED in 3.0.0+. You are encouraged to change it to &quot;</span>
                <span class="s2">&quot;your own instance e.g: `settings = Dynaconf(*options)`&quot;</span><span class="p">,</span>
                <span class="ne">DeprecationWarning</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">default_settings</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;load_dotenv&quot;</span><span class="p">))</span>
        <span class="n">environment_variable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s2">&quot;ENVVAR_FOR_DYNACONF&quot;</span><span class="p">,</span> <span class="n">default_settings</span><span class="o">.</span><span class="n">ENVVAR_FOR_DYNACONF</span>
        <span class="p">)</span>
        <span class="n">settings_module</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">environment_variable</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wrapped</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">(</span>
            <span class="n">settings_module</span><span class="o">=</span><span class="n">settings_module</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span>
        <span class="p">)</span>

<div class="viewcode-block" id="LazySettings.configure"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.LazySettings.configure">[docs]</a>    <span class="k">def</span> <span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings_module</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Allows user to reconfigure settings object passing a new settings</span>
<span class="sd">        module or separated kwargs</span>

<span class="sd">        :param settings_module: defines the setttings file</span>
<span class="sd">        :param kwargs:  override default settings</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">default_settings</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;load_dotenv&quot;</span><span class="p">))</span>
        <span class="n">environment_var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s2">&quot;ENVVAR_FOR_DYNACONF&quot;</span><span class="p">,</span> <span class="n">default_settings</span><span class="o">.</span><span class="n">ENVVAR_FOR_DYNACONF</span>
        <span class="p">)</span>
        <span class="n">settings_module</span> <span class="o">=</span> <span class="n">settings_module</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">environment_var</span><span class="p">)</span>
        <span class="n">compat_kwargs</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wrapped</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">(</span><span class="n">settings_module</span><span class="o">=</span><span class="n">settings_module</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">configured</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If wrapped is configured&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrapped</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">empty</span></div>


<div class="viewcode-block" id="Settings"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings">[docs]</a><span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Common logic for settings whether set by a module or by the user.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dynaconf_banner</span> <span class="o">=</span> <span class="n">BANNER</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings_module</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="sd">&quot;&quot;&quot;Execute loaders and custom initialization</span>

<span class="sd">        :param settings_module: defines the setttings file</span>
<span class="sd">        :param kwargs:  override default settings</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fresh</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_envs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_files</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_deleted</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store</span> <span class="o">=</span> <span class="n">DynaBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_env_cache</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_by_loaders</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_loaders</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">environ</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SETTINGS_MODULE</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_not_installed_warnings</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_memoized</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">validators</span> <span class="o">=</span> <span class="n">ValidatorList</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">validators</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;validators&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">compat_kwargs</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">settings_module</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;SETTINGS_FILE_FOR_DYNACONF&quot;</span><span class="p">,</span> <span class="n">settings_module</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="c1"># execute loaders only after setting defaults got from kwargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execute_loaders</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Allow direct call of `settings(&#39;val&#39;)`</span>
<span class="sd">        in place of `settings.get(&#39;val&#39;)`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Allow `settings.FOO = &#39;value&#39;` and deal with `_deleted`&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_deleted</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Settings</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__delattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;stores reference in `_deleted` for proper error management&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_deleted</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">Settings</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__delattr__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="s2">&quot;Respond to `item in settings`&quot;</span>
        <span class="k">return</span> <span class="n">item</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span> <span class="ow">or</span> <span class="n">item</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Allow getting variables as dict keys `settings[&#39;KEY&#39;]`&quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">empty</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="n">empty</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Allow `settings[&#39;KEY&#39;] = &#39;value&#39;`&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">store</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets internal storage&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_store</span>

    <span class="k">def</span> <span class="fm">__dir__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Enable auto-complete for code editors&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">RESERVED_ATTRS</span>
            <span class="o">+</span> <span class="p">[</span><span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
            <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="p">)</span>

<div class="viewcode-block" id="Settings.keys"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.keys">[docs]</a>    <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Redirects to store object&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span></div>

<div class="viewcode-block" id="Settings.values"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.values">[docs]</a>    <span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Redirects to store object&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">values</span><span class="p">()</span></div>

<div class="viewcode-block" id="Settings.as_dict"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.as_dict">[docs]</a>    <span class="k">def</span> <span class="nf">as_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">internal</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a dictionary with set key and values.</span>

<span class="sd">        :param env: Str env name, default self.current_env `DEVELOPMENT`</span>
<span class="sd">        :param internal: bool - should include dynaconf internal vars?</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ctx_mgr</span> <span class="o">=</span> <span class="n">suppress</span><span class="p">()</span> <span class="k">if</span> <span class="n">env</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">using_env</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">ctx_mgr</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="c1"># if not internal remove internal settings</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">internal</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">default_settings</span><span class="p">):</span>
                    <span class="n">data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">data</span></div>

    <span class="n">to_dict</span> <span class="o">=</span> <span class="n">as_dict</span>  <span class="c1"># backwards compatibility</span>

    <span class="k">def</span> <span class="nf">_dotted_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dotted_key</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Perform dotted key lookups and keep track of where we are.</span>
<span class="sd">        :param key: The name of the setting value, will always be upper case</span>
<span class="sd">        :param default: In case of not found it will be returned</span>
<span class="sd">        :param parent: Is there a pre-loaded parent in a nested data?</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">split_key</span> <span class="o">=</span> <span class="n">dotted_key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="n">name</span><span class="p">,</span> <span class="n">keys</span> <span class="o">=</span> <span class="n">split_key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">split_key</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># If we&#39;ve reached the end, or parent key not found, then return result</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">keys</span> <span class="ow">or</span> <span class="n">result</span> <span class="o">==</span> <span class="n">default</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span>

        <span class="c1"># If we&#39;ve still got key elements to traverse, let&#39;s do that.</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dotted_get</span><span class="p">(</span>
            <span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">keys</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">result</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>

<div class="viewcode-block" id="Settings.get"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.get">[docs]</a>    <span class="nd">@evaluate_lazy_format</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">key</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fresh</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">dotted_lookup</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a value from settings store, this is the prefered way to access::</span>

<span class="sd">            &gt;&gt;&gt; from dynaconf import settings</span>
<span class="sd">            &gt;&gt;&gt; settings.get(&#39;KEY&#39;)</span>

<span class="sd">        :param key: The name of the setting value, will always be upper case</span>
<span class="sd">        :param default: In case of not found it will be returned</span>
<span class="sd">        :param cast: Should cast in to @int, @float, @bool or @json ?</span>
<span class="sd">        :param fresh: Should reload from loaders store before access?</span>
<span class="sd">        :param dotted_lookup: Should perform dotted-path lookup?</span>
<span class="sd">        :param parent: Is there a pre-loaded parent in a nested data?</span>
<span class="sd">        :return: The value if found, default or None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">key</span> <span class="ow">and</span> <span class="n">dotted_lookup</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dotted_get</span><span class="p">(</span>
                <span class="n">dotted_key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                <span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">,</span>
                <span class="n">cast</span><span class="o">=</span><span class="n">cast</span><span class="p">,</span>
                <span class="n">fresh</span><span class="o">=</span><span class="n">fresh</span><span class="p">,</span>
                <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">key</span> <span class="o">=</span> <span class="n">upperfy</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deleted</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">default</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">fresh</span>
            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fresh</span>
            <span class="ow">or</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;FRESH_VARS_FOR_DYNACONF&quot;</span><span class="p">,</span> <span class="p">())</span>
        <span class="p">)</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">default_settings</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unset</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">execute_loaders</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="n">parent</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cast</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">converters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cast</span><span class="p">)(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span></div>

<div class="viewcode-block" id="Settings.exists"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.exists">[docs]</a>    <span class="k">def</span> <span class="nf">exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">fresh</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if key exists</span>

<span class="sd">        :param key: the name of setting variable</span>
<span class="sd">        :param fresh: if key should be taken from source direclty</span>
<span class="sd">        :return: Boolean</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">upperfy</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deleted</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">fresh</span><span class="o">=</span><span class="n">fresh</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">missing</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">missing</span></div>

<div class="viewcode-block" id="Settings.get_fresh"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.get_fresh">[docs]</a>    <span class="k">def</span> <span class="nf">get_fresh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This is a shortcut to `get(key, fresh=True)`. always reload from</span>
<span class="sd">        loaders store before getting the var.</span>

<span class="sd">        :param key: The name of the setting value, will always be upper case</span>
<span class="sd">        :param default: In case of not found it will be returned</span>
<span class="sd">        :param cast: Should cast in to @int, @float, @bool or @json ?</span>
<span class="sd">        :return: The value if found, default or None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="n">cast</span><span class="p">,</span> <span class="n">fresh</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="Settings.get_environ"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.get_environ">[docs]</a>    <span class="k">def</span> <span class="nf">get_environ</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get value from environment variable using os.environ.get</span>

<span class="sd">        :param key: The name of the setting value, will always be upper case</span>
<span class="sd">        :param default: In case of not found it will be returned</span>
<span class="sd">        :param cast: Should cast in to @int, @float, @bool or @json ?</span>
<span class="sd">         or cast must be true to use cast inference</span>
<span class="sd">        :return: The value if found, default or None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">upperfy</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">cast</span> <span class="ow">in</span> <span class="n">converters</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">converters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cast</span><span class="p">)(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">cast</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">parse_conf_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">tomlfy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span></div>

<div class="viewcode-block" id="Settings.exists_in_environ"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.exists_in_environ">[docs]</a>    <span class="k">def</span> <span class="nf">exists_in_environ</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return True if env variable is exported&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">upperfy</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">environ</span></div>

<div class="viewcode-block" id="Settings.as_bool"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.as_bool">[docs]</a>    <span class="k">def</span> <span class="nf">as_bool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Partial method for get with bool cast&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="s2">&quot;@bool&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Settings.as_int"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.as_int">[docs]</a>    <span class="k">def</span> <span class="nf">as_int</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Partial method for get with int cast&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="s2">&quot;@int&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Settings.as_float"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.as_float">[docs]</a>    <span class="k">def</span> <span class="nf">as_float</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Partial method for get with float cast&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="s2">&quot;@float&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Settings.as_json"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.as_json">[docs]</a>    <span class="k">def</span> <span class="nf">as_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Partial method for get with json cast&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">cast</span><span class="o">=</span><span class="s2">&quot;@json&quot;</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">loaded_envs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get or create internal loaded envs list&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_envs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_envs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_envs</span>

    <span class="c1"># compat</span>
    <span class="n">loaded_namespaces</span> <span class="o">=</span> <span class="n">loaded_envs</span>

    <span class="nd">@loaded_envs</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">loaded_envs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Setter for env list&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_envs</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">loaded_by_loaders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the internal mapping of LOADER -&gt; values&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_by_loaders</span>

<div class="viewcode-block" id="Settings.from_env"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.from_env">[docs]</a>    <span class="k">def</span> <span class="nf">from_env</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">keep</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a new isolated settings object pointing to specified env.</span>

<span class="sd">        Example of settings.toml::</span>

<span class="sd">            [development]</span>
<span class="sd">            message = &#39;This is in dev&#39;</span>
<span class="sd">            [other]</span>
<span class="sd">            message = &#39;this is in other env&#39;</span>

<span class="sd">        Program::</span>

<span class="sd">            &gt;&gt;&gt; from dynaconf import settings</span>
<span class="sd">            &gt;&gt;&gt; print(settings.MESSAGE)</span>
<span class="sd">            &#39;This is in dev&#39;</span>
<span class="sd">            &gt;&gt;&gt; print(settings.from_env(&#39;other&#39;).MESSAGE)</span>
<span class="sd">            &#39;This is in other env&#39;</span>
<span class="sd">            # The existing settings object remains the same.</span>
<span class="sd">            &gt;&gt;&gt; print(settings.MESSAGE)</span>
<span class="sd">            &#39;This is in dev&#39;</span>

<span class="sd">        Arguments:</span>
<span class="sd">            env {str} -- Env to load (development, production, custom)</span>

<span class="sd">        Keyword Arguments:</span>
<span class="sd">            keep {bool} -- Keep pre-existing values (default: {False})</span>
<span class="sd">            kwargs {dict} -- Passed directly to new instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cache_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">env</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">keep</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">kwargs</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">cache_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_env_cache</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_env_cache</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span>

        <span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">key</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">default_settings</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">isupper</span><span class="p">()</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">RENAMED_VARS</span>
        <span class="p">}</span>

        <span class="c1"># This is here for backwards compatibility</span>
        <span class="c1"># To be removed on 4.x.x</span>
        <span class="n">default_settings_paths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;default_settings_paths&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">default_settings_paths</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">new_data</span><span class="p">[</span><span class="s2">&quot;default_settings_paths&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">default_settings_paths</span>

        <span class="k">if</span> <span class="n">keep</span><span class="p">:</span>
            <span class="c1"># keep existing values from current env</span>
            <span class="n">new_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="n">key</span><span class="p">:</span> <span class="n">value</span>
                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">isupper</span><span class="p">()</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">RENAMED_VARS</span>
                <span class="p">}</span>
            <span class="p">)</span>

        <span class="n">new_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">new_data</span><span class="p">[</span><span class="s2">&quot;FORCE_ENV_FOR_DYNACONF&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">env</span>
        <span class="n">new_settings</span> <span class="o">=</span> <span class="n">LazySettings</span><span class="p">(</span><span class="o">**</span><span class="n">new_data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_env_cache</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_settings</span>
        <span class="k">return</span> <span class="n">new_settings</span></div>

<div class="viewcode-block" id="Settings.using_env"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.using_env">[docs]</a>    <span class="nd">@contextmanager</span>
    <span class="k">def</span> <span class="nf">using_env</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">clean</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This context manager allows the contextual use of a different env</span>
<span class="sd">        Example of settings.toml::</span>

<span class="sd">            [development]</span>
<span class="sd">            message = &#39;This is in dev&#39;</span>
<span class="sd">            [other]</span>
<span class="sd">            message = &#39;this is in other env&#39;</span>

<span class="sd">        Program::</span>

<span class="sd">            &gt;&gt;&gt; from dynaconf import settings</span>
<span class="sd">            &gt;&gt;&gt; print settings.MESSAGE</span>
<span class="sd">            &#39;This is in dev&#39;</span>
<span class="sd">            &gt;&gt;&gt; with settings.using_env(&#39;OTHER&#39;):</span>
<span class="sd">            ...    print settings.MESSAGE</span>
<span class="sd">            &#39;this is in other env&#39;</span>

<span class="sd">        :param env: Upper case name of env without any _</span>
<span class="sd">        :param clean: If preloaded vars should be cleaned</span>
<span class="sd">        :param silent: Silence errors</span>
<span class="sd">        :param filename: Custom filename to load (optional)</span>
<span class="sd">        :return: context</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setenv</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">clean</span><span class="o">=</span><span class="n">clean</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span>
            <span class="k">yield</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">env</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ENV_FOR_DYNACONF</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">loaded_envs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setenv</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_env</span><span class="p">,</span> <span class="n">clean</span><span class="o">=</span><span class="n">clean</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span></div>

    <span class="c1"># compat</span>
    <span class="n">using_namespace</span> <span class="o">=</span> <span class="n">using_env</span>

<div class="viewcode-block" id="Settings.fresh"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.fresh">[docs]</a>    <span class="nd">@contextmanager</span>
    <span class="k">def</span> <span class="nf">fresh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        this context manager force the load of a key direct from the store::</span>

<span class="sd">            $ export DYNACONF_VALUE=&#39;Original&#39;</span>
<span class="sd">            &gt;&gt;&gt; from dynaconf import settings</span>
<span class="sd">            &gt;&gt;&gt; print settings.VALUE</span>
<span class="sd">            &#39;Original&#39;</span>
<span class="sd">            $ export DYNACONF_VALUE=&#39;Changed Value&#39;</span>
<span class="sd">            &gt;&gt;&gt; print settings.VALUE  # will not be reloaded from env vars</span>
<span class="sd">            &#39;Original</span>
<span class="sd">            &gt;&gt;&gt; with settings.fresh(): # inside this context all is reloaded</span>
<span class="sd">            ...    print settings.VALUE</span>
<span class="sd">            &#39;Changed Value&#39;</span>

<span class="sd">        an alternative is using `settings.get_fresh(key)`</span>

<span class="sd">        :return: context</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_fresh</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">yield</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fresh</span> <span class="o">=</span> <span class="kc">False</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">current_env</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the current active env&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ENVIRONMENTS_FOR_DYNACONF</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;main&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">FORCE_ENV_FOR_DYNACONF</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">FORCE_ENV_FOR_DYNACONF</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">loaded_envs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ENV_FOR_DYNACONF</span>

    <span class="c1"># compat</span>
    <span class="n">current_namespace</span> <span class="o">=</span> <span class="n">current_env</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">settings_module</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets SETTINGS_MODULE variable&quot;&quot;&quot;</span>
        <span class="n">settings_module</span> <span class="o">=</span> <span class="n">parse_conf_data</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ENVVAR_FOR_DYNACONF</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">SETTINGS_FILE_FOR_DYNACONF</span>
            <span class="p">),</span>
            <span class="n">tomlfy</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">settings_module</span> <span class="o">!=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;SETTINGS_MODULE&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;SETTINGS_MODULE&quot;</span><span class="p">,</span> <span class="n">settings_module</span><span class="p">)</span>

        <span class="c1"># This is for backewards compatibility, to be removed on 4.x.x</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">SETTINGS_MODULE</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;default_settings_paths&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SETTINGS_MODULE</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;default_settings_paths&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">SETTINGS_MODULE</span>

    <span class="c1"># Backwards compatibility see #169</span>
    <span class="n">settings_file</span> <span class="o">=</span> <span class="n">settings_module</span>

<div class="viewcode-block" id="Settings.setenv"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.setenv">[docs]</a>    <span class="k">def</span> <span class="nf">setenv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">clean</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Used to interactively change the env</span>
<span class="sd">        Example of settings.toml::</span>

<span class="sd">            [development]</span>
<span class="sd">            message = &#39;This is in dev&#39;</span>
<span class="sd">            [other]</span>
<span class="sd">            message = &#39;this is in other env&#39;</span>

<span class="sd">        Program::</span>

<span class="sd">            &gt;&gt;&gt; from dynaconf import settings</span>
<span class="sd">            &gt;&gt;&gt; print settings.MESSAGE</span>
<span class="sd">            &#39;This is in dev&#39;</span>
<span class="sd">            &gt;&gt;&gt; with settings.using_env(&#39;OTHER&#39;):</span>
<span class="sd">            ...    print settings.MESSAGE</span>
<span class="sd">            &#39;this is in other env&#39;</span>

<span class="sd">        :param env: Upper case name of env without any _</span>
<span class="sd">        :param clean: If preloaded vars should be cleaned</span>
<span class="sd">        :param silent: Silence errors</span>
<span class="sd">        :param filename: Custom filename to load (optional)</span>
<span class="sd">        :return: context</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">env</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">ENV_FOR_DYNACONF</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;env should be a string&quot;</span><span class="p">)</span>

        <span class="n">env</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">env</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ENV_FOR_DYNACONF</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loaded_envs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loaded_envs</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">clean</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span><span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execute_loaders</span><span class="p">(</span><span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span></div>

    <span class="c1"># compat</span>
    <span class="n">namespace</span> <span class="o">=</span> <span class="n">setenv</span>

<div class="viewcode-block" id="Settings.clean"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.clean">[docs]</a>    <span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clean all loaded values to reload when switching envs&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unset</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></div>

<div class="viewcode-block" id="Settings.unset"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.unset">[docs]</a>    <span class="k">def</span> <span class="nf">unset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Unset on all references</span>

<span class="sd">        :param key: The key to be unset</span>
<span class="sd">        :param force: Bypass default checks and force unset</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">upperfy</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">default_settings</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span>
            <span class="ow">or</span> <span class="n">force</span>
        <span class="p">):</span>
            <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="Settings.unset_all"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.unset_all">[docs]</a>    <span class="k">def</span> <span class="nf">unset_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="sd">&quot;&quot;&quot;Unset based on a list of keys</span>

<span class="sd">        :param keys: a list of keys</span>
<span class="sd">        :param force: Bypass default checks and force unset</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unset</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="n">force</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_dotted_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dotted_key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">tomlfy</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets dotted keys as nested dictionaries.</span>

<span class="sd">        Dotted set will always reassign the value, to merge use `@merge` token</span>

<span class="sd">        Arguments:</span>
<span class="sd">            dotted_key {str} -- A traversal name e.g: foo.bar.zaz</span>
<span class="sd">            value {Any} -- The value to set to the nested value.</span>

<span class="sd">        Keyword Arguments:</span>
<span class="sd">            tomlfy {bool} -- Perform toml parsing (default: {False})</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">split_keys</span> <span class="o">=</span> <span class="n">dotted_key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="n">existing_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">split_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">{})</span>
        <span class="n">new_data</span> <span class="o">=</span> <span class="n">DynaBox</span><span class="p">()</span>

        <span class="n">tree</span> <span class="o">=</span> <span class="n">new_data</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">split_keys</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">tree</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">{})</span>

        <span class="n">value</span> <span class="o">=</span> <span class="n">parse_conf_data</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">tomlfy</span><span class="o">=</span><span class="n">tomlfy</span><span class="p">)</span>
        <span class="n">tree</span><span class="p">[</span><span class="n">split_keys</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">if</span> <span class="n">existing_data</span><span class="p">:</span>
            <span class="n">object_merge</span><span class="p">(</span>
                <span class="n">old</span><span class="o">=</span><span class="p">{</span><span class="n">split_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">existing_data</span><span class="p">},</span>
                <span class="n">new</span><span class="o">=</span><span class="n">new_data</span><span class="p">,</span>
                <span class="n">tail</span><span class="o">=</span><span class="n">split_keys</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">new_data</span><span class="p">,</span> <span class="n">tomlfy</span><span class="o">=</span><span class="n">tomlfy</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="Settings.set"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">key</span><span class="p">,</span>
        <span class="n">value</span><span class="p">,</span>
        <span class="n">loader_identifier</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">tomlfy</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">dotted_lookup</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">is_secret</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">merge</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set a value storing references for the loader</span>

<span class="sd">        :param key: The key to store</span>
<span class="sd">        :param value: The value to store</span>
<span class="sd">        :param loader_identifier: Optional loader name e.g: toml, yaml etc.</span>
<span class="sd">        :param tomlfy: Bool define if value is parsed by toml (defaults False)</span>
<span class="sd">        :param is_secret: Bool define if secret values is hidden on logs.</span>
<span class="sd">        :param merge: Bool define if existing nested data will be merged.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nested_sep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;NESTED_SEPARATOR_FOR_DYNACONF&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nested_sep</span> <span class="ow">and</span> <span class="n">nested_sep</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
            <span class="c1"># turn FOO__bar__ZAZ in `FOO.bar.ZAZ`</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">nested_sep</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">key</span> <span class="ow">and</span> <span class="n">dotted_lookup</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dotted_set</span><span class="p">(</span>
                <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">loader_identifier</span><span class="o">=</span><span class="n">loader_identifier</span><span class="p">,</span> <span class="n">tomlfy</span><span class="o">=</span><span class="n">tomlfy</span>
            <span class="p">)</span>

        <span class="n">value</span> <span class="o">=</span> <span class="n">parse_conf_data</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">tomlfy</span><span class="o">=</span><span class="n">tomlfy</span><span class="p">)</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">upperfy</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="n">existing</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;_dynaconf_del&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="c1"># just in case someone use a `@del` in a first level var.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unset</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;_dynaconf_reset&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
            <span class="c1"># just in case someone use a `@reset` in a first level var.</span>
            <span class="c1"># NOTE: @reset/Reset is deprecated in v3.0.0</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">unwrap</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;_dynaconf_merge&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
            <span class="c1"># just in case someone use a `@merge` in a first level var</span>
            <span class="k">if</span> <span class="n">existing</span><span class="p">:</span>
                <span class="n">object_merge</span><span class="p">(</span><span class="n">existing</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">unwrap</span><span class="p">())</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">unwrap</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">existing</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">existing</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
            <span class="c1"># `dynaconf_merge` used in file root `merge=True`</span>
            <span class="k">if</span> <span class="n">merge</span><span class="p">:</span>
                <span class="n">object_merge</span><span class="p">(</span><span class="n">existing</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># `dynaconf_merge` may be used within the key structure</span>
                <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_merge_before_set</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">existing</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">is_secret</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">DynaBox</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_deleted</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

        <span class="c1"># set loader identifiers so cleaners know which keys to clean</span>
        <span class="k">if</span> <span class="n">loader_identifier</span> <span class="ow">and</span> <span class="n">loader_identifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">loaded_by_loaders</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loaded_by_loaders</span><span class="p">[</span><span class="n">loader_identifier</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">loader_identifier</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loaded_by_loaders</span><span class="p">[</span><span class="n">loader_identifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span>
        <span class="k">elif</span> <span class="n">loader_identifier</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># if .set is called without loader identifier it becomes</span>
            <span class="c1"># a default value and goes away only when explicitly unset</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span></div>

<div class="viewcode-block" id="Settings.update"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">loader_identifier</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">tomlfy</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">is_secret</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">merge</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update values in the current settings object without saving in stores::</span>

<span class="sd">            &gt;&gt;&gt; from dynaconf import settings</span>
<span class="sd">            &gt;&gt;&gt; print settings.NAME</span>
<span class="sd">            &#39;Bruno&#39;</span>
<span class="sd">            &gt;&gt;&gt; settings.update({&#39;NAME&#39;: &#39;John&#39;}, other_value=1)</span>
<span class="sd">            &gt;&gt;&gt; print settings.NAME</span>
<span class="sd">            &#39;John&#39;</span>
<span class="sd">            &gt;&gt;&gt; print settings.OTHER_VALUE</span>
<span class="sd">            1</span>

<span class="sd">        :param data: Data to be updated</span>
<span class="sd">        :param loader_identifier: Only to be used by custom loaders</span>
<span class="sd">        :param tomlfy: Bool define if value is parsed by toml (defaults False)</span>
<span class="sd">        :param merge: Bool define if existing nested data will be merged.</span>
<span class="sd">        :param kwargs: extra values to update</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                <span class="n">key</span><span class="p">,</span>
                <span class="n">value</span><span class="p">,</span>
                <span class="n">loader_identifier</span><span class="o">=</span><span class="n">loader_identifier</span><span class="p">,</span>
                <span class="n">tomlfy</span><span class="o">=</span><span class="n">tomlfy</span><span class="p">,</span>
                <span class="n">is_secret</span><span class="o">=</span><span class="n">is_secret</span><span class="p">,</span>
                <span class="n">merge</span><span class="o">=</span><span class="n">merge</span><span class="p">,</span>
            <span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_merge_before_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">existing</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">is_secret</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Merge the new value being set with the existing value before set&quot;&quot;&quot;</span>

        <span class="n">global_merge</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;MERGE_ENABLED_FOR_DYNACONF&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">local_merge</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span>
                <span class="s2">&quot;dynaconf_merge&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;dynaconf_merge_unique&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">local_merge</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
                <span class="c1"># In case `dynaconf_merge:` holds value not boolean - ref #241</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">local_merge</span>

            <span class="k">if</span> <span class="n">global_merge</span> <span class="ow">or</span> <span class="n">local_merge</span><span class="p">:</span>
                <span class="n">safe_value</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="s2">&quot;***&quot;</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">value</span><span class="p">}</span> <span class="k">if</span> <span class="n">is_secret</span> <span class="k">else</span> <span class="n">value</span>
                <span class="n">object_merge</span><span class="p">(</span><span class="n">existing</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="n">safe_value</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="p">{</span>
                        <span class="n">k</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;***&quot;</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">safe_value</span> <span class="k">else</span> <span class="n">v</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="n">is_secret</span>
                    <span class="k">else</span> <span class="n">value</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">local_merge</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;dynaconf_merge&quot;</span> <span class="ow">in</span> <span class="n">value</span> <span class="ow">or</span> <span class="s2">&quot;dynaconf_merge_unique&quot;</span> <span class="ow">in</span> <span class="n">value</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">global_merge</span> <span class="ow">or</span> <span class="n">local_merge</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="n">unique</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="k">if</span> <span class="n">local_merge</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">value</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;dynaconf_merge&quot;</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>  <span class="c1"># EAFP</span>
                        <span class="n">value</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;dynaconf_merge_unique&quot;</span><span class="p">)</span>
                        <span class="n">unique</span> <span class="o">=</span> <span class="kc">True</span>

                <span class="n">original</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="n">object_merge</span><span class="p">(</span><span class="n">existing</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="n">unique</span><span class="p">)</span>
                <span class="n">safe_value</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="p">[</span><span class="s2">&quot;***&quot;</span> <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">original</span> <span class="k">else</span> <span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">is_secret</span>
                    <span class="k">else</span> <span class="n">value</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">loaders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="sd">&quot;&quot;&quot;Return available loaders&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">LOADERS_FOR_DYNACONF</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loaders</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">loader_module_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">LOADERS_FOR_DYNACONF</span><span class="p">:</span>
                <span class="n">loader</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">loader_module_name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_loaders</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">loader</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loaders</span>

<div class="viewcode-block" id="Settings.reload"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.reload">[docs]</a>    <span class="k">def</span> <span class="nf">reload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="sd">&quot;&quot;&quot;Clean end Execute all loaders&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execute_loaders</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">silent</span><span class="p">)</span></div>

<div class="viewcode-block" id="Settings.execute_loaders"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.execute_loaders">[docs]</a>    <span class="k">def</span> <span class="nf">execute_loaders</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Execute all internal and registered loaders</span>

<span class="sd">        :param env: The environment to load</span>
<span class="sd">        :param silent: If loading erros is silenced</span>
<span class="sd">        :param key: if provided load a single key</span>
<span class="sd">        :param filename: optional custom filename to load</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">default_loader</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">)</span>
        <span class="n">env</span> <span class="o">=</span> <span class="p">(</span><span class="n">env</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_env</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="n">silent</span> <span class="o">=</span> <span class="n">silent</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">SILENT_ERRORS_FOR_DYNACONF</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pre_load</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
        <span class="n">settings_loader</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_extra_yaml</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">silent</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>  <span class="c1"># DEPRECATED</span>
        <span class="n">enable_external_loaders</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">loader</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">loaders</span><span class="p">:</span>
            <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_includes</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span></div>

<div class="viewcode-block" id="Settings.pre_load"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.pre_load">[docs]</a>    <span class="k">def</span> <span class="nf">pre_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">silent</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Do we have any file to pre-load before main settings file?&quot;&quot;&quot;</span>
        <span class="n">preloads</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;PRELOAD_FOR_DYNACONF&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">if</span> <span class="n">preloads</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">preloads</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span></div>

<div class="viewcode-block" id="Settings.load_includes"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.load_includes">[docs]</a>    <span class="k">def</span> <span class="nf">load_includes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">silent</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Do we have any nested includes we need to process?&quot;&quot;&quot;</span>
        <span class="n">includes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;DYNACONF_INCLUDE&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">includes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ensure_a_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;INCLUDES_FOR_DYNACONF&quot;</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">includes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">includes</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
            <span class="c1"># ensure env vars are the last thing loaded after all includes</span>
            <span class="n">last_loader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loaders</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">loaders</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">last_loader</span> <span class="ow">and</span> <span class="n">last_loader</span> <span class="o">==</span> <span class="n">env_loader</span><span class="p">:</span>
                <span class="n">last_loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">silent</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span></div>

<div class="viewcode-block" id="Settings.load_file"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.load_file">[docs]</a>    <span class="k">def</span> <span class="nf">load_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Programmatically load files from ``path``.</span>

<span class="sd">        :param path: A single filename or a file list</span>
<span class="sd">        :param env: Which env to load from file (default current_env)</span>
<span class="sd">        :param silent: Should raise errors?</span>
<span class="sd">        :param key: Load a single key?</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">env</span> <span class="o">=</span> <span class="p">(</span><span class="n">env</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_env</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">ensure_a_list</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">files</span><span class="p">:</span>
            <span class="n">already_loaded</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">_filename</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>

                <span class="k">if</span> <span class="n">py_loader</span><span class="o">.</span><span class="n">try_to_load_from_py_module_name</span><span class="p">(</span>
                    <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">_filename</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="kc">True</span>
                <span class="p">):</span>
                    <span class="c1"># if it was possible to load from module name</span>
                    <span class="c1"># continue the loop.</span>
                    <span class="k">continue</span>

                <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_root_path</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">_filename</span>
                <span class="p">)</span>
                <span class="n">paths</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">p</span>
                    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">filepath</span><span class="p">))</span>
                    <span class="k">if</span> <span class="s2">&quot;.local.&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">p</span>
                <span class="p">]</span>
                <span class="n">local_paths</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">filepath</span><span class="p">))</span> <span class="k">if</span> <span class="s2">&quot;.local.&quot;</span> <span class="ow">in</span> <span class="n">p</span>
                <span class="p">]</span>
                <span class="c1"># Handle possible *.globs sorted alphanumeric</span>
                <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span> <span class="o">+</span> <span class="n">local_paths</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">already_loaded</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                        <span class="k">continue</span>
                    <span class="n">settings_loader</span><span class="p">(</span>
                        <span class="n">obj</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span>
                        <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span>
                        <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                        <span class="n">filename</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">already_loaded</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_root_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;ROOT_PATH_FOR_DYNACONF or the path of first loaded file or &#39;.&#39;&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ROOT_PATH_FOR_DYNACONF</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ROOT_PATH_FOR_DYNACONF</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loaded_files</span><span class="p">:</span>  <span class="c1"># called once</span>
            <span class="n">root_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_loaded_files</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;ROOT_PATH_FOR_DYNACONF&quot;</span><span class="p">,</span> <span class="n">root_path</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">root_path</span>

<div class="viewcode-block" id="Settings.load_extra_yaml"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.load_extra_yaml">[docs]</a>    <span class="k">def</span> <span class="nf">load_extra_yaml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">silent</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This is deprecated, kept for compat</span>

<span class="sd">        .. deprecated:: 1.0.0</span>
<span class="sd">            Use multiple settings or INCLUDES_FOR_DYNACONF files instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;YAML&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;The use of YAML var is deprecated, please define multiple &quot;</span>
                <span class="s2">&quot;filepaths instead: &quot;</span>
                <span class="s2">&quot;e.g: SETTINGS_FILE_FOR_DYNACONF = &quot;</span>
                <span class="s2">&quot;&#39;settings.py,settings.yaml,settings.toml&#39; or &quot;</span>
                <span class="s2">&quot;INCLUDES_FOR_DYNACONF=[&#39;path.toml&#39;, &#39;folder/*&#39;]&quot;</span>
            <span class="p">)</span>
            <span class="n">yaml_loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span>
                <span class="n">filename</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">find_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;YAML&quot;</span><span class="p">)),</span>
                <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span>
                <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="Settings.path_for"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.path_for">[docs]</a>    <span class="k">def</span> <span class="nf">path_for</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Path containing _root_path&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_root_path</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="Settings.find_file"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.find_file">[docs]</a>    <span class="k">def</span> <span class="nf">find_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;project_root&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root_path</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span>
            <span class="s2">&quot;skip_files&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;SKIP_FILES_FOR_DYNACONF&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">find_file</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Settings.flag"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.flag">[docs]</a>    <span class="k">def</span> <span class="nf">flag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Feature flagging system</span>
<span class="sd">        write flags to redis</span>
<span class="sd">        $ dynaconf write redis -s DASHBOARD=1 -e premiumuser</span>
<span class="sd">        meaning: Any premium user has DASHBOARD feature enabled</span>

<span class="sd">        In your program do::</span>

<span class="sd">            # premium user has access to dashboard?</span>
<span class="sd">            &gt;&gt;&gt; if settings.flag(&#39;dashboard&#39;, &#39;premiumuser&#39;):</span>
<span class="sd">            ...     activate_dashboard()</span>

<span class="sd">        The value is ensured to be loaded fresh from redis server</span>

<span class="sd">        It also works with file settings but the recommended is redis</span>
<span class="sd">        as the data can be loaded once it is updated.</span>

<span class="sd">        :param key: The flag name</span>
<span class="sd">        :param env: The env to look for</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">env</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">ENVVAR_PREFIX_FOR_DYNACONF</span> <span class="ow">or</span> <span class="s2">&quot;DYNACONF&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">using_env</span><span class="p">(</span><span class="n">env</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_fresh</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">or</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">true_values</span></div>

<div class="viewcode-block" id="Settings.populate_obj"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.populate_obj">[docs]</a>    <span class="k">def</span> <span class="nf">populate_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Given the `obj` populate it using self.store items.</span>

<span class="sd">        :param obj: An object to be populated, a class instance.</span>
<span class="sd">        :param keys: A list of keys to be included.</span>
<span class="sd">        :param ignore: A list of keys to be excluded.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="n">keys</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">upperfy</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ignore</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">ignore</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">empty</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">empty</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="Settings.dynaconf"><a class="viewcode-back" href="../../reference/dynaconf.html#dynaconf.base.Settings.dynaconf">[docs]</a>    <span class="k">def</span> <span class="nf">dynaconf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="sd">&quot;&quot;&quot;A proxy to access internal methods and attributes</span>

<span class="sd">        Starting in 3.0.0 Dynaconf now allows first level lower case</span>
<span class="sd">        keys that are not reserved keyword, so this is a proxy to</span>
<span class="sd">        internal methods and attrs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span>  <span class="c1"># TOBE IMPLEMENTED</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">logger</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="sd">&quot;&quot;&quot;backwards compatibility with pre 3.0 loaders</span>
<span class="sd">        In dynaconf 3.0.0 logger and debug messages has been removed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;logger and DEBUG messages has been removed on dynaconf 3.0.0&quot;</span>
        <span class="p">)</span>
        <span class="kn">import</span> <span class="nn">logging</span>  <span class="c1"># noqa</span>

        <span class="k">return</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;dynaconf&quot;</span><span class="p">)</span></div>


<span class="sd">&quot;&quot;&quot;Attributes created on Settings before 3.0.0&quot;&quot;&quot;</span>
<span class="n">RESERVED_ATTRS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">[</span>
        <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span><span class="n">LazySettings</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">)</span>
    <span class="p">]</span>
    <span class="o">+</span> <span class="p">[</span>
        <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span><span class="n">Settings</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">)</span>
    <span class="p">]</span>
    <span class="o">+</span> <span class="p">[</span>
        <span class="s2">&quot;_defaults&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_deleted&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_env_cache&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_fresh&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_kwargs&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_loaded_by_loaders&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_loaded_envs&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_loaded_files&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_loaders&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_memoized&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_not_installed_warnings&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_store&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_warn_dynaconf_global_settings&quot;</span><span class="p">,</span>
        <span class="s2">&quot;environ&quot;</span><span class="p">,</span>
        <span class="s2">&quot;SETTINGS_MODULE&quot;</span><span class="p">,</span>
        <span class="s2">&quot;validators&quot;</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../index.html">
    <img class="logo" src="../../_static/logo.svg" alt="Logo"/>
    
    <h1 class="logo logo-name">dynaconf</h1>
    
  </a>
</p>



<p class="blurb">Layered configuration system for Python applications</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=rochacbruno&repo=dynaconf&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../guides/usage.html">)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/environment_variables.html">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/environment_variables.html#id24">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/environment_variables.html#id31">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/environment_variables.html#id36">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/environment_variables.html#id41">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/environment_variables.html#id46">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/environment_variables.html#id51">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/accessing_values.html">)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/external_storages.html">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/external_storages.html#id6">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/configuration.html">)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/advanced_usage.html">)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/flask.html">)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/flask.html#id16">]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/flask.html#id29">]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/django.html">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/django.html#id55">})</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/examples.html">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/modules.html">Module reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015-2020, Bruno Rocha.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.0.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    
    <a href="https://github.com/rochacbruno/dynaconf" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>